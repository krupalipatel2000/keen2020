
@{
    ViewBag.Title = "Insert";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<br>
<script>
    function validate() {
        var fname = document.registration.txtFirstName;
        var lname = document.registration.txtLastName;
        var profile = document.registration.txtprofile;
        var email = document.registration.txtEmailId;
        var password = document.registration.txtPwd;
        var gender = document.registration.gender;
        var cno = document.registration.txtCno;
        var fname_pat = /^[A-Za-z]+$/;
        if (fname.value != "" && fname.value.match(fname_pat)) {
        }
        else {
            alert("FirstName is not Proper");
            fname.focus();
            return false;
        }
        var lname_pat = /^[A-Za-z]+$/;
        if (lname.value != "" && lname.value.match(lname_pat)) {
        }
        else {
            alert("LastName is not Proper");
            lname.focus();
            return false;
        }
        if (profile.value != "") {
        }
        else {
            alert("choose proper profile pic");
            profile.focus();
            return false;
        }
        var email_pat = /^\w+([\.-]?\w+)*@@\w+([\.-]?\w+)*(\.\w{2,3})+$/;
        if (email.value != "" && email.value.match(email_pat)) {
        }
        else {
            alert("Email is not Proper");
            email.focus();
            return false;
        }
        var pass_pat = /^[A-Za-z]\w{7,14}$/;
        if (password != "" && password.value.match(pass_pat)) {
        }
        else {
            alert("Password is not Proper");
            password.focus();
            return false;
        }
        if (gender != "") {
        }
        else {
            alert("choose gender");
            gender.focus();
            return false;
        }
        var cno_pat = /^\d{10}$/;
        if (cno.value != "" && cno.value.match(cno_pat)) {
        }
        else {
            alert("Contact number is not Proper");
            cno.focus();
            return false;
        }

        return true;
    }
</script>
<head>
    <style>
        body, html {
            height: 100%;
        }

        .bg-img {
            /* The image used */
            background-image: url("../../Images/form1.jpg");
            /* Control the height of the image */
            min-height: 380px;
            /* Center and scale the image nicely */
            background-position: center;
            background-repeat: no-repeat;
            background-size: cover;
        }

        /* Add styles to the form container */
        /*.container {
            position: relative;
            right: 0;
            margin-left: 300px;
            max-width: 1000px;
            padding: 16px;
            background-color: transparent;
        }*/
        .user {
            position: relative;
            right: 0;
            margin: 20px;
            max-width: 1000px;
            padding: 16px;
            background-color: transparent;
        }
        /*.btn {
            background-color: #4CAF50;
            color: white;
            padding: 16px 20px;
            border: none;
            cursor: pointer;
            width: 25%;
            opacity: 0.9;
        }*/
    </style>
</head>

<center>
    <div class="p-2">
        <div class="card shadow mb-4" style="width:1000px;">
            <div class="card-header py-3">
                <center><h4 class="m-0 font-weight-bold text-primary">Registration For User</h4></center>
            </div>
            

            <div class="bg-img">
                <div class="card-body">
                    <form class="user" method="post" name="registration" enctype="multipart/form-data">
                        <div class="form-group row">
                            <div class="col-sm-6 mb-3 mb-sm-3">
                                <input type="text" class="form-control" name="txtFirstName" placeholder="Your First Name" maxlength="20">
                            </div>
                            <div class="col-sm-6 mb-3 mb-sm-0">
                                <input type="text" class="form-control" name="txtLastName" placeholder="Your Last Name" maxlength="20">
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-sm-12 mb-3 mb-sm-3">
                                <input type="file" class="form-control" name="txtprofile" placeholder="ProfilePic" required>
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-sm-6 mb-3 mb-sm-0">
                                <input type="email" class="form-control" id="txtEmailId" name="txtEmailId" placeholder="Your Email Id" onblur="return checkEmail(this.value);">
                            </div>
                            <div class="col-sm-6 mb-3 mb-sm-0">
                                <input type="password" class="form-control" name="txtPwd" placeholder=" Your Password">
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-sm-2 mb-3 mb-sm-0">
                                <h4 style="text-align:left;">Gender : </h4>
                                <input type="radio" id="male" name="gender" value="male" checked>
                                <label for="male">Male</label>
                                <input type="radio" id="female" name="gender" value="female">
                                <label for="female">Female</label>
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-sm-12 mb-3 mb-sm-0">
                                <input type="text" class="form-control" name="txtCno" placeholder="Your Contact Number">
                            </div>
                        </div>
                        <br />
                        <input type="submit" value="Create User" class="btn btn-success" onclick="return validate();" />
                    </form>
                </div>
            </div>
        </div>
    </div>
</center>
@*<div class="p-2">
        <div class="card shadow mb-4">
            <div class="card-header py-3">
                <h6 class="m-0 font-weight-bold text-primary">
                    <a href="@Url.Action("Index","ClientUser")" class="btn btn-primary">
                        <i class="fa fa-step-backward"></i>
                    </a>
                </h6><br />
            </div>
            <div class="card-body bg-dark">
                <form class="user" method="post" name="registration" enctype="multipart/form-data">
                    <center><h2 style="color:azure">Registration</h2></center><br />

                    <input type="submit" value="Create User" class="btn btn-success" onclick="return validate();" />
                </form>
            </div>
        </div>
    </div>*@
<script src="~/Scripts/jquery-3.3.1.min.js"></script>
<script>
    function checkEmail(val) {
                if (val != "") {
                    $.ajax(
                        {
                            type: "POST",
                            url: "@Url.Action("checkEmail","ClientUser")",
                            data: { id: val },
                            success: function (response) {
                               // alert("Success");
                                if (response == "false") {
                                }
                                else {
                                    alert("Email already exist");
                                    $('#txtEmailId').val("");
                                    $('#txtEmailId').focus();
                                }
                            },
                            failure: function (response) {
                                alert('Fail - ' + response.responseText);
                            },
                            error: function (response) {
                                alert('Error - ' + response.responseText);
                            }
                        });
                }
            }
</script>
